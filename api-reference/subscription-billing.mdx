---
title: 'Subscription & Billing'
description: 'Manage your subscription tier, monitor usage, and handle billing'
---

## Subscription Tiers

CTGT API offers two tiers designed for different needs:

<CardGroup cols={2}>
  <Card title="Free Tier" icon="gift">
    **Perfect for getting started**
    
    - 3 AI models
    - 20 req/min, 100 req/hour
    - 500 req/day
    - 100K tokens/day
    - Pay-as-you-go 
    - No credit card required
  </Card>
  
  <Card title="Paid Tier" icon="crown">
    **For production applications**
    
    - All 10 AI models
    - 100 req/min, 1,000 req/hour
    - 10,000 req/day
    - 10M tokens/day
    - Pay-as-you-go
    - Priority support
  </Card>
</CardGroup>

---

## Rate Limits Comparison

| Limit | Free Tier | Paid Tier | Increase |
|-------|-----------|-----------|----------|
| **Requests per minute** | 20 | 100 | **5x** |
| **Requests per hour** | 100 | 1,000 | **10x** |
| **Requests per day** | 500 | 10,000 | **20x** |
| **Tokens per day** | 100,000 | 10,000,000 | **100x** |
| **Available models** | 3 | 10 | **3.6x** |

<Note>
Rate limits reset at the start of each time period (minute, hour, day).
</Note>

---

## Check Your Subscription

View your current subscription status and limits:

<CodeGroup>

```bash cURL
curl https://api.ctgt.ai/v1/subscription/info \
  -H "Authorization: Bearer sk-ctgt-YOUR_API_KEY"
```

```python Python
import requests

api_key = "sk-ctgt-YOUR_API_KEY"
url = "https://api.ctgt.ai/v1/subscription/info"

headers = {"Authorization": f"Bearer {api_key}"}
response = requests.get(url, headers=headers)
print(response.json())
```

```javascript JavaScript
const response = await fetch('https://api.ctgt.ai/v1/subscription/info', {
  headers: {
    'Authorization': 'Bearer sk-ctgt-YOUR_API_KEY'
  }
});

const data = await response.json();
console.log(data);
```

</CodeGroup>

**Response (Free Tier):**
```json
{
  "user_id": "user_abc123",
  "email": "john@example.com",
  "subscription_tier": "free",
  "stripe_customer_id": "cus_abc123",
  "rate_limits": {
    "requests_per_minute": 20,
    "requests_per_hour": 100,
    "requests_per_day": 500,
    "tokens_per_day": 100000
  },
  "available_models": [
    {
      "model": "gemini-2.5-flash",
      "display_name": "Gemini 2.5 Flash",
      "description": "Fast and efficient model",
      "tier": "free",
      "pricing": {
        "input": 0.50,
        "output": 2.70
      }
    }
  ],
  "upgrade_url": "https://ctgt.ai/pricing"
}
```

**Response (Paid Tier):**
```json
{
  "user_id": "user_abc123",
  "email": "john@example.com",
  "subscription_tier": "paid",
  "stripe_customer_id": "cus_abc123",
  "rate_limits": {
    "requests_per_minute": 100,
    "requests_per_hour": 1000,
    "requests_per_day": 10000,
    "tokens_per_day": 10000000
  },
  "available_models": [
    // All 10 models listed
  ],
  "upgrade_url": null
}
```

---

## Upgrading to Paid Tier

### Step 1: Initiate Upgrade

<CodeGroup>

```bash cURL
curl -X POST https://api.ctgt.ai/v1/subscription/upgrade \
  -H "Authorization: Bearer sk-ctgt-YOUR_API_KEY"
```

```python Python
import requests

api_key = "sk-ctgt-YOUR_API_KEY"
url = "https://api.ctgt.ai/v1/subscription/upgrade"

headers = {"Authorization": f"Bearer {api_key}"}
response = requests.post(url, headers=headers)
result = response.json()
print(f"Checkout URL: {result['checkout_url']}")
```

```javascript JavaScript
const response = await fetch('https://api.ctgt.ai/v1/subscription/upgrade', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer sk-ctgt-YOUR_API_KEY'
  }
});

const data = await response.json();
console.log('Checkout URL:', data.checkout_url);
```

</CodeGroup>

**Response:**
```json
{
  "message": "Checkout session created. Complete payment to upgrade.",
  "checkout_url": "https://checkout.stripe.com/c/pay/cs_test_abc123...",
  "session_id": "cs_test_abc123",
  "tier": "free"
}
```

### Step 2: Complete Payment

1. Visit the `checkout_url` in your browser
2. Complete the Stripe checkout process
3. Your tier will be automatically upgraded to "paid"

<Tip>
The upgrade takes effect immediately after successful payment. No need to restart your application.
</Tip>

### Step 3: Verify Upgrade

```bash
curl https://api.ctgt.ai/v1/subscription/info \
  -H "Authorization: Bearer sk-ctgt-YOUR_API_KEY"
```

Look for:
```json
{
  "subscription_tier": "paid",
  "rate_limits": {
    "requests_per_minute": 100,
    ...
  }
}
```

---

## Downgrading to Free Tier

You can downgrade to free tier at any time:

<CodeGroup>

```bash cURL
curl -X POST https://api.ctgt.ai/v1/subscription/downgrade \
  -H "Authorization: Bearer sk-ctgt-YOUR_API_KEY"
```

```python Python
import requests

api_key = "sk-ctgt-YOUR_API_KEY"
url = "https://api.ctgt.ai/v1/subscription/downgrade"

headers = {"Authorization": f"Bearer {api_key}"}
response = requests.post(url, headers=headers)
print(response.json())
```

</CodeGroup>

**Response:**
```json
{
  "message": "Successfully downgraded to free tier",
  "tier": "free"
}
```

<Warning>
**Downgrading will:**
- Reduce rate limits immediately
- Restrict access to only 3 free-tier models
- Take effect immediately
</Warning>

---

## Billing & Usage

### View Current Usage

Monitor your token consumption and costs in real-time:

<CodeGroup>

```bash cURL
curl https://api.ctgt.ai/v1/billing/usage \
  -H "Authorization: Bearer sk-ctgt-YOUR_API_KEY"
```

```python Python
import requests

api_key = "sk-ctgt-YOUR_API_KEY"
url = "https://api.ctgt.ai/v1/billing/usage"

headers = {"Authorization": f"Bearer {api_key}"}
response = requests.get(url, headers=headers)
usage = response.json()

print(f"Total Cost: ${usage['usage']['total_cost_usd']:.2f}")
print(f"Total Tokens: {usage['usage']['total_tokens']:,}")
```

```javascript JavaScript
const response = await fetch('https://api.ctgt.ai/v1/billing/usage', {
  headers: {
    'Authorization': 'Bearer sk-ctgt-YOUR_API_KEY'
  }
});

const data = await response.json();
console.log('Total Cost:', data.usage.total_cost_usd);
console.log('Total Tokens:', data.usage.total_tokens);
```

</CodeGroup>

**Response:**
```json
{
  "user_id": "user_abc123",
  "email": "john@example.com",
  "period": {
    "start": "2025-12-01T00:00:00Z",
    "end": "2025-12-31T23:59:59Z"
  },
  "usage": {
    "total_requests": 1234,
    "total_tokens": 567890,
    "total_cost_usd": 12.45,
    "by_model": {
      "gemini-2.5-flash": {
        "requests": 800,
        "prompt_tokens": 120000,
        "completion_tokens": 80000,
        "cost_usd": 4.20
      },
      "claude-sonnet-4-5-20250929": {
        "requests": 434,
        "prompt_tokens": 200000,
        "completion_tokens": 167890,
        "cost_usd": 8.25
      }
    }
  }
}
```

### View Billing History

Get historical billing data for a date range:

<CodeGroup>

```bash cURL
curl "https://api.ctgt.ai/v1/billing/history?start_date=2025-11-01&end_date=2025-12-01" \
  -H "Authorization: Bearer sk-ctgt-YOUR_API_KEY"
```

```python Python
import requests

api_key = "sk-ctgt-YOUR_API_KEY"
url = "https://api.ctgt.ai/v1/billing/history"
params = {
    "start_date": "2025-11-01",
    "end_date": "2025-12-01"
}

headers = {"Authorization": f"Bearer {api_key}"}
response = requests.get(url, headers=headers, params=params)
history = response.json()
```

</CodeGroup>

### Generate Invoice

Request an invoice for your usage:

<CodeGroup>

```bash cURL
curl -X POST https://api.ctgt.ai/v1/billing/generate-invoice \
  -H "Authorization: Bearer sk-ctgt-YOUR_API_KEY"
```

```python Python
import requests

api_key = "sk-ctgt-YOUR_API_KEY"
url = "https://api.ctgt.ai/v1/billing/generate-invoice"

headers = {"Authorization": f"Bearer {api_key}"}
response = requests.post(url, headers=headers)
invoice = response.json()
print(f"Invoice ID: {invoice['invoice_id']}")
print(f"Amount: ${invoice['amount_usd']:.2f}")
```

</CodeGroup>

**Response:**
```json
{
  "message": "Invoice generated and sent",
  "usage": {
    "total_tokens": 567890,
    "total_cost_usd": 12.45
  },
  "invoice_id": "in_abc123",
  "amount_usd": 12.45
}
```

---

## Rate Limit Headers

Every API response includes rate limit information in the headers:

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1702847523
```

**Headers explained:**
- `X-RateLimit-Limit`: Maximum requests allowed in the current window
- `X-RateLimit-Remaining`: Requests remaining in current window
- `X-RateLimit-Reset`: Unix timestamp when the limit resets

### Example: Checking Rate Limits

```python
import requests

response = requests.post(
    "https://api.ctgt.ai/v1/chat/completions",
    headers={"Authorization": f"Bearer {api_key}"},
    json={"model": "gemini-2.5-flash", "messages": [...]}
)

print(f"Limit: {response.headers.get('X-RateLimit-Limit')}")
print(f"Remaining: {response.headers.get('X-RateLimit-Remaining')}")
print(f"Resets at: {response.headers.get('X-RateLimit-Reset')}")
```

---

## Handling Rate Limits

When you exceed your rate limits:

**Status Code:** `429 Too Many Requests`

**Response:**
```json
{
  "detail": "Rate limit exceeded. Please try again later."
}
```

### Best Practices

<AccordionGroup>
  <Accordion title="Implement Exponential Backoff">
    ```python
    import time
    import requests
    
    def make_request_with_retry(url, headers, data, max_retries=5):
        for attempt in range(max_retries):
            response = requests.post(url, headers=headers, json=data)
            
            if response.status_code == 429:
                wait_time = 2 ** attempt  # Exponential backoff
                print(f"Rate limited. Waiting {wait_time}s...")
                time.sleep(wait_time)
                continue
            
            return response
        
        raise Exception("Max retries exceeded")
    ```
  </Accordion>
  
  <Accordion title="Monitor Your Rate Limit Headers">
    ```python
    def monitor_rate_limits(response):
        remaining = int(response.headers.get('X-RateLimit-Remaining', 0))
        
        if remaining < 10:
            print(f"Warning: Only {remaining} requests remaining!")
        
        if remaining == 0:
            reset_time = int(response.headers.get('X-RateLimit-Reset', 0))
            wait_seconds = reset_time - time.time()
            print(f"Rate limit exhausted. Waiting {wait_seconds}s")
            time.sleep(wait_seconds)
    ```
  </Accordion>
  
  <Accordion title="Cache Responses When Possible">
    ```python
    from functools import lru_cache
    import hashlib
    import json
    
    @lru_cache(maxsize=1000)
    def cached_api_call(prompt_hash):
        # Make actual API call
        response = requests.post(...)
        return response.json()
    
    def get_completion(prompt):
        # Create hash of prompt for caching
        prompt_hash = hashlib.md5(prompt.encode()).hexdigest()
        return cached_api_call(prompt_hash)
    ```
  </Accordion>
  
  <Accordion title="Batch Similar Requests">
    ```python
    # Instead of 100 individual requests
    for item in items:
        result = api_call(item)
    
    # Batch into fewer requests with multiple items
    for batch in chunks(items, 10):
        results = api_call_batch(batch)
    ```
  </Accordion>
</AccordionGroup>

<Tip>
**Pro tip:** Upgrade to paid tier for 5-100x higher rate limits if you're consistently hitting limits.
</Tip>

---

## Cost Management

### Setting Budget Alerts

Monitor your spending with the usage endpoint:

```python
import requests

def check_budget_alert(api_key, monthly_budget=100):
    url = "https://api.ctgt.ai/v1/billing/usage"
    headers = {"Authorization": f"Bearer {api_key}"}
    
    response = requests.get(url, headers=headers)
    usage = response.json()
    
    current_cost = usage['usage']['total_cost_usd']
    
    if current_cost > monthly_budget * 0.8:
        print(f"âš ï¸ Warning: Used ${current_cost:.2f} of ${monthly_budget} budget")
    
    if current_cost > monthly_budget:
        print(f"ðŸš¨ Alert: Budget exceeded! ${current_cost:.2f} / ${monthly_budget}")
        return False
    
    return True
```

### Optimize Costs

<CardGroup cols={2}>
  <Card title="Choose the Right Model" icon="bullseye">
    Use cheaper models for simple tasks:
    - Gemini Flash Lite: $0.30 input
    - GPT-5 Nano: $0.25 input
  </Card>
  
  <Card title="Control Token Limits" icon="sliders">
    Set `max_tokens` to limit response length:
    ```json
    {"max_tokens": 500}
    ```
  </Card>
  
  <Card title="Optimize Prompts" icon="message">
    Shorter prompts = lower costs:
    - Be concise
    - Remove unnecessary context
    - Keep messages focused
  </Card>
  
  <Card title="Cache Common Responses" icon="database">
    Store and reuse responses for:
    - FAQ answers
    - Common queries
    - Static content
  </Card>
</CardGroup>

---

## Pricing Summary

### Pay-as-you-go Pricing

Both tiers pay for token usage at the same rates:

| Model Category | Input (per 1M) | Output (per 1M) |
|----------------|----------------|-----------------|
| **Most Affordable** | $0.25 - $0.50 | $0.60 - $2.70 |
| **Mid-Range** | $1.20 - $4.00 | $5.20 - $14.00 |
| **Premium** | $5.00 - $10.00 | $17.00 - $30.00 |

<Info>
See the [Models & Pricing](/api-reference/models-pricing) page for complete pricing details.
</Info>

---

## Example Cost Scenarios

### Scenario 1: Small Project (Free Tier)

**Usage:**
- 500 requests/day
- Average 100 input + 300 output tokens per request
- Using Gemini 2.5 Flash

**Monthly Cost:**
- Input: 500 Ã— 30 Ã— 100 tokens = 1.5M tokens = $0.75
- Output: 500 Ã— 30 Ã— 300 tokens = 4.5M tokens = $12.15
- **Total: $12.90/month**

### Scenario 2: Medium Project (Paid Tier)

**Usage:**
- 5,000 requests/day
- Average 200 input + 500 output tokens per request
- Mix of Gemini Flash and GPT-5

**Monthly Cost:**
- Usage: ~$150-200
- **Total: $150-200/month**

### Scenario 3: Large Project (Paid Tier)

**Usage:**
- 50,000 requests/day
- Using advanced models (Claude Sonnet, GPT-5.2)
- Complex queries with higher token counts

**Monthly Cost:**
- Usage: ~$1,500-2,500
- **Total: $1,500-2,500/month**

<Note>
All scenarios assume normal usage patterns. Your costs may vary based on actual token consumption.
</Note>

---

## Next Steps

<CardGroup cols={2}>
  <Card title="View All Models" icon="layer-group" href="/api-reference/models-pricing">
    Compare all 10 models and their pricing
  </Card>
  
  <Card title="API Features" icon="wand-magic-sparkles" href="/api-reference/api-features">
    Learn about streaming and advanced features
  </Card>
  
  <Card title="Code Examples" icon="code" href="/api-reference/code-examples">
    See complete SDK implementations
  </Card>
  
  <Card title="Chat Completions" icon="messages" href="/api-reference/endpoint/chat-completions">
    Full API reference documentation
  </Card>
</CardGroup>